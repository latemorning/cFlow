<?xml version="1.0" encoding="UTF-8"?>
<!--
	수정일        수정자                          수정내용
  =========     =======    =================================================
  2024.07.23   	harry     	 	최초 생성
-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="yrycManageDAO">

    <select id="selectYrycManageList" parameterType="egovframework.com.dty.hnr.yrc.service.YrycManageVO" resultType="egovframework.com.dty.hnr.yrc.service.YrycManageVO">
        SELECT
               B.OCCRRNC_YEAR    AS occrrncYear,
               B.USER_ID         AS mberId,
               B.YRYC_OCCRRNC_CO AS occrncYrycCo,
               B.USE_YRYC_CO     AS useYrycCo,
               B.REMNDR_YRYC_CO  AS remndrYrycCo,
               (SELECT USER_NM FROM comvnusermaster WHERE ESNTL_ID = B.USER_ID) AS mberNm
        FROM
               COMTNINDVDLYRYCMANAGE B
        WHERE
               1 = 1
        <if test="@org.apache.commons.lang3.StringUtils@isNotBlank(mberId)">
          AND  B.USER_ID = #{mberId}
        </if>
        <if test="@org.apache.commons.lang3.StringUtils@isNotBlank(occrrncYear)">
          AND  B.OCCRRNC_YEAR = #{occrrncYear}
        </if>
    </select>

    <select id="selectYrycManageListTotCnt" parameterType="egovframework.com.dty.hnr.yrc.service.YrycManageVO" resultType="int">
        SELECT  COUNT(*) totcnt
        FROM    COMTNINDVDLYRYCMANAGE
        WHERE   1 = 1
        <if test="@org.apache.commons.lang3.StringUtils@isNotBlank(mberId)">
          AND  B.USER_ID = #{mberId}
        </if>
        <if test="@org.apache.commons.lang3.StringUtils@isNotBlank(occrrncYear)">
          AND  B.OCCRRNC_YEAR = #{occrrncYear}
        </if>
    </select>


    <select id="selectYrycManage" parameterType="egovframework.com.dty.hnr.yrc.service.YrycManageVO"
            resultType="egovframework.com.dty.hnr.yrc.service.YrycManageVO">
        SELECT OCCRRNC_YEAR    AS occrrncYear,
               USER_ID         AS usid,
               YRYC_OCCRRNC_CO AS occrncYrycCo,
               USE_YRYC_CO     AS useYrycCo,
               REMNDR_YRYC_CO  AS remndrYrycCo
        FROM COMTNINDVDLYRYCMANAGE
        WHERE OCCRRNC_YEAR = #{occrrncYear}
          AND USER_ID = #{mberId}
    </select>

</mapper>
